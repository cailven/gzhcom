<?xml version="1.0" encoding="utf-8"?>
<div id="code">
  <section id="整体" style="line-height: 0; pointer-events: none; overflow: hidden;visibility: visible;overflow:hidden;">
    <section id="伸长1" style="overflow:hidden">
      <section id="内容层1" style="height: 0;">
        <svg id="1-1" style="background-image: url(&quot;images/20231113qingmei/1-1.jpg&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 579.6">
        </svg>
        <section id="零高2" style="line-height: 0;height: 0;">
          <svg id="2-1" style="background-image: url(&quot;images/20231113qingmei/2-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 592.9399999999999">
          </svg>
        </section>
        <svg id="2-1" style="background-image: url(&quot;images/20231113qingmei/2-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 592.9399999999999">
          <animate values="1;0;0" begin="click" dur="1000s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>
          <rect x="0" y="0" width="100%" height="100%" fill="#ffffff" opacity="0" style="pointer-events: auto;">
                <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
          </rect>
        </svg>
        <section id="零高3" style="line-height: 0;height: 0;">
          <svg id="3-1" style="background-image: url(&quot;images/20231113qingmei/3-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 546.02">
          </svg>
        </section>

        <svg id="2-1" style="background-image: url(&quot;images/20231113qingmei/3-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 546.02">
          <animate values="1;0;0" begin="click" dur="1000s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>
          <rect x="0" y="0" width="100%" height="100%" fill="#ffffff" opacity="0" style="pointer-events: auto;">
            <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
          </rect>
        </svg>
        <section id="零高4" style="line-height: 0;height: 0;">
          <svg id="4-1" style="background-image: url(&quot;images/20231113qingmei/4-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 533.6">
          </svg>
        </section>

        <svg id="2-1" style="background-image: url(&quot;images/20231113qingmei/4-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 533.6">
          <animate values="1;0;0" begin="click" dur="1000s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>
          <rect x="0" y="0" width="100%" height="100%" fill="#ffffff" opacity="0" style="pointer-events: auto;">
            <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
          </rect>
        </svg>
        <svg id="5" style="background-image: url(&quot;images/20231113qingmei/5.png&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 345 521.9722222222223">
        </svg>
      </section>
      <section style="pointer-events:none;font-size:0;">
        <svg id="宽度控制1" style="max-width:none!important;
            background-image:url(&quot;images/20231113qingmei/1-1.gif&quot;);
            background-repeat:no-repeat;background-size:100% auto;" viewBox="0 0 345 579.6">
          <animate id="宽度动画1" attributeName="width" fill="freeze" calcMode="spline" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" restart="never" keyTimes="0;0.002;1"
                   values="100%;485.9544513457557%;485.9544513457557%" dur="1000s" begin="click+2.5s"></animate>
          <animate attributeName="opacity" begin="click+2s" restart="never" dur="500s" keyTimes="0;0.00000001;1" values="1;0;0" fill="freeze"></animate>
          <g opacity="0">
            <animate values="0;1;1" begin="1s" dur="1000s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>
            <g id="1-0">
              <animate attributeName="opacity" calcMode="spline" keySplines="0.42 0 0.58 1.0; 0.42 0 0.58 1.0; 0.42 0 0.58 1.0; 0.42 0 0.58 1.0" values="0.5;1;0.5;1;0.5" begin="0" dur="3s" repeatCount="indefinite"></animate>
              <foreignObject x="0" y="0" width="100%" height="100%">
                <svg style="background-image: url(&quot;images/20231113qingmei/1-0.png&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0vw;line-height: 0;"  viewbox="0 0 345 579.6">
                </svg>
              </foreignObject>
            </g>
          </g>

          <g>
            <g id="1-2" transform="translate(1000 0)">
              <foreignObject x="0" y="0" width="100%" height="100%">
                <svg style="background-image: url(&quot;images/20231113qingmei/1-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0vw;line-height: 0;"  viewbox="0 0 345 579.6">
                </svg>
              </foreignObject>
            </g>
            <animateTransform attributeName="transform" type="translate" values="-1000 0" fill="freeze" begin="click" dur="1000s"></animateTransform>
            <rect style="pointer-events:visible;" width="100%" height="100%" fill="#000000" opacity="0">
              <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
            </rect>
          </g>

        </svg>
      </section>
    </section>
  </section>
</div>
<form id ="J_Form" method="post" enctype="multipart/form-data" class="form-horizontal" action="#" onsubmit="return doCampaignEdit();">
  <input type="file" accept="image/png, image/gif, image/jpeg, image/jpg" name="file[]" id="file" multiple="multiple" />
  <input type="submit" name="submit" value="上传" />
</form>
<!-- <script src="js/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<!-- <script src="js/伸长计算.js"></script> -->
<script>
  var projectID = "20231113qingmei"
  var endTxt = null
  function doCampaignEdit() {
    var formData = new FormData($('#J_Form')[0]);
    console.log(formData)
    $.ajax({
      url: 'https://svgtools.im20.com.cn/User/doUploadWx',
      type: 'POST',
      dataType: 'json',
      data: formData,
      contentType: false,
      processData: false,
      success: function (data) {
        if(data.code==0){
          console.log(data)
          $('#code').each(function() {
            var oldText = $(this).html();
            if(endTxt){
              endTxt = endTxt;
            }else {
              endTxt = oldText;
            }
            for(let i=0;i<data.data.length;i++){
              endTxt = endTxt.replace("images/"+projectID+"/"+data.data[i].name,data.data[i].upl_url);
            }
            console.log(endTxt)
          });
        }else {
          console.log(data.message);
        }
      }
    });
    return false;
  }

</script>