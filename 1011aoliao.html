<?xml version="1.0" encoding="utf-8"?>
<div id="code">
  <section id="整体" style="line-height: 0; pointer-events: none; overflow: hidden; visibility: visible; overflow: hidden">
    <section id="伸长1" style="overflow: hidden">
      <section id="内容层1" style="height: 0">
        <svg id="1-1" style="background-image: url('images/1011aoliao/1.png'); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 1130"></svg>
        <section id="2">
          <svg id="2" style="background-image: url('images/1011aoliao/2.png'); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 869"></svg>
        </section>
        <section style="transform: scale(1); margin-top: -1px; margin-bottom: -1px; line-height: 0">
          <section style="height: 0; line-height: 0">
            <section style="transform: scale(1); margin-top: -1px">
              <section style="line-height: 0; font-size: 0; pointer-events: painted">
                <svg viewBox="0 0 343 30" style="margin-top: -12px; isolation: isolate; opacity: 0; pointer-events: none"></svg>
                <section style="margin-top: 0; transform: scale(0.9); transform-origin: 50% 0; max-width: 100%">
                  <section>
                    <iframe
                      class="video_iframe wx_video_iframe rich_pages"
                      data-vidtype="2"
                      data-mpvid="wxv_3675002408024670218"
                      data-cover="http%3A%2F%2Fmmbiz.qpic.cn%2Fsz_mmbiz_jpg%2F1WTibVt2rAghd13LHBvxRl3Ik67YjdibicqCRaW21TYleM6RDD2YFwVnjbyicwYqlBE3OQcRia5msHZ3bEyJvbfjfyQ%2F0%3Fwx_fmt%3Djpeg"
                      allowfullscreen=""
                      frameborder="0"
                      style="position: relative; z-index: 1; border-radius: 4px"
                      height="325"
                      width="578"
                      src="/cgi-bin/readtemplate?t=tmpl/video_tmpl&amp;vid=wxv_3675002408024670218"
                      data-ratio="1.7777777777777777"
                      data-w="1920"
                    ></iframe>
                  </section>
                </section>
                <svg viewBox="0 0 343 1" style="margin-top: -12px; isolation: isolate; opacity: 0; pointer-events: none"></svg>
              </section>
            </section>
          </section>
          <section style="line-height: 0; margin: 0 !important; isolation: isolate; transform: translateZ(1px); pointer-events: none">
            <section style="line-height: 0; display: block; pointer-events: none; transform: scale(1); margin-top: 0px">
              <svg style="transform: scale(1); pointer-events: none; background-image: url('images/1011aoliao/3.png'); background-size: 100%; background-repeat: no-repeat" viewBox="0 0 620 393" xmlns="http://www.w3.org/2000/svg"></svg>
            </section>
          </section>
        </section>

        <section id="4">
          <svg id="4" style="background-image: url('images/1011aoliao/4.png'); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 4742"></svg>
        </section>
        <section id="qrcodebg" style="height: 0; line-height: 0">
          <svg id="4_1" style="background-image: url('images/1011aoliao/4_1.png'); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 300"></svg>
        </section>
        <section id="qrcode">
          <img data-s="300,640" class="rich_pages wxw-img js_insertlocalimg" src="images/1011aoliao/4_2.png" style="width: 99%; height: auto; pointer-events: visible" data-ratio="0.5032258064516129" data-w="620" data-imgqrcoded="1" data-type="png" data-imgfileid="309587918" />
        </section>
        <!-- <section id="5">
          <svg id="5" style="background-image: url(&quot;images/1011aoliao/5.png&quot;); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 232">
            <a style="background-color: #f00;box-sizing: border-box;opacity: 0;"
            href="">
             <rect x="0" y="0" width="100%" height="100%" fill="#ffffff" opacity="0" style="pointer-events: visible;"></rect>
         </a>
          </svg>
        </section> -->
        <section id="6">
          <svg id="6" style="background-image: url('images/1011aoliao/6.png'); background-size: 100%; background-repeat: no-repeat; margin-top: -0.33vw; line-height: 0" viewbox="0 0 620 630"></svg>
        </section>
      </section>

      <section style="pointer-events: none; font-size: 0">
        <svg id="宽度控制1" style="max-width: none !important; background-image: url('images/1011aoliao/1-1.gif'); background-repeat: no-repeat; background-size: 100% auto" viewBox="0 0 640 1167">
          <animate id="宽度动画1" attributeName="width" fill="freeze" calcMode="spline" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" restart="never" keyTimes="0;0.002;1" values="100%;715%;715%" dur="1000s" begin="click+4.5s"></animate>
          <animate attributeName="opacity" begin="click+3.76s" restart="never" dur="500s" keyTimes="0;0.00000001;1" values="1;0;0" fill="freeze"></animate>
          <g opacity="0">
            <animate values="0;1;1" begin="1s" dur="1000s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>
          </g>

          <g>
            <g id="1-2" transform="translate(1000 0)">
              <foreignObject x="0" y="0" width="100%" height="100%">
                <svg style="background-image: url('images/1011aoliao/1-2.gif'); background-size: 100%; background-repeat: no-repeat; margin-top: -0vw; line-height: 0" viewbox="0 0 640 1167"> </svg>
              </foreignObject>
            </g>
            <animateTransform attributeName="transform" type="translate" values="-1000 0" fill="freeze" begin="click" dur="1000s"></animateTransform>
            <rect style="pointer-events: visible" width="100%" height="100%" fill="#000000" opacity="0">
              <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
            </rect>
          </g>
        </svg>
      </section>
    </section>
  </section>
</div>
<form id="J_Form" method="post" enctype="multipart/form-data" class="form-horizontal" action="#" onsubmit="return doCampaignEdit();">
  <input type="file" accept="image/png, image/gif, image/jpeg, image/jpg" name="file[]" id="file" multiple="multiple" />
  <input type="submit" name="submit" value="上传" />
</form>
<!-- <script src="js/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<!-- <script src="js/伸长计算.js"></script> -->
<script>
  var projectID = "1011aoliao";
  var endTxt = null;
  function doCampaignEdit() {
    var formData = new FormData($("#J_Form")[0]);
    console.log(formData);
    $.ajax({
      url: "https://svgtools.im20.com.cn/User/doUploadWx",
      type: "POST",
      dataType: "json",
      data: formData,
      contentType: false,
      processData: false,
      success: function (data) {
        if (data.code == 0) {
          console.log(data);
          $("#code").each(function () {
            var oldText = $(this).html();
            if (endTxt) {
              endTxt = endTxt;
            } else {
              endTxt = oldText;
            }
            for (let i = 0; i < data.data.length; i++) {
              endTxt = endTxt.replace("images/" + projectID + "/" + data.data[i].name, data.data[i].upl_url);
            }
            console.log(endTxt);
          });
        } else {
          console.log(data.message);
        }
      },
    });
    return false;
  }
</script>
