<?xml version="1.0" encoding="utf-8"?>
<div id="code">
  <section id="整体" style="line-height: 0; pointer-events: none; overflow: hidden;visibility: visible;overflow:hidden;">
    <section id="伸长1" style="overflow:hidden">
      <section id="内容层1" style="height: 0;">
      
        <svg viewBox="0 0 640 1190" componentId="id_i60mkewuc" style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0cmkDwP4syIWNjDYwL2yibzicYVoSJjAYvAhoax8XO2yUy4DiaxdpNMewg/0?wx_fmt=gif&quot;); background-size: 100%; margin-top: -1px;; margin-top: -1px">
        </svg>

        <svg viewBox="0 0 640 1144" componentId="id_ctbbdpaoq" style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0aVduRuf2ib01cPvChswMcLAl2j9ynBCGyqoFSd8V6pOlKqO0WgCPkcA/0?wx_fmt=gif&quot;); background-size: 100%; margin-top: -1px;; margin-top: -1px">
        </svg>
        <svg viewBox="0 0 640 1124" componentId="id_27zrwgc5n" style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0XhugdVhgzUIbp55em7yN8mLeicRDWrSEGPQMr2v0y9ibOzcUESCLE1XA/0?wx_fmt=gif&quot;); background-size: 100%; margin-top: -1px;; margin-top: -1px">
        </svg>
       
        <svg viewBox="0 0 640 1132" componentId="id_an2hrn319" style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A07XG7iby5lL78Xb9VZVF1UnKe6qSqw3u7wMO5sEk3X5XwkJqkMP7JX0Q/0?wx_fmt=gif&quot;); background-size: 100%; margin-top: -1px;; margin-top: -1px">
        </svg>
        <svg viewBox="0 0 1000 1486" componentId="id_69cbgyfux" style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0jcW25elcoBfeXrksCb5CV13JnbrgV6cJ57GwK0hMW5EibLUbyxR3d7Q/0?wx_fmt=gif&quot;); background-size: 100%; margin-top: -1px;; margin-top: -1px">

       
      </section>
      <section style="pointer-events:none;font-size:0;">
        <svg id="宽度控制1" style="max-width:none!important;
            background-image:url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0H3icqHdd2mmDowPUDCkxutBvZz9nJvVRYhdVgwWTmaun7ZrGmSsJvfQ/0?wx_fmt=gif&quot;);
            background-repeat:no-repeat;background-size:100% auto;" viewBox="0 0 640 1190">
          <animate id="宽度动画1" attributeName="width" fill="freeze" calcMode="spline" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" restart="never" keyTimes="0;0.002;1"
                   values="100%;469%;469%" dur="1000s" begin="click+0.5s"></animate>
          <!-- <animate attributeName="opacity" begin="click+4s" restart="never" dur="500s" keyTimes="0;0.00000001;1" values="1;0;0" fill="freeze"></animate> -->
          <animate values="1;0;0" begin="click+0s" dur="500s" fill="freeze" restart="never" keyTimes="0;0.001;1" attributeName="opacity"></animate>


          <g>
            <g id="1-2" transform="translate(2000 0)">
              <foreignObject x="0" y="0" width="100%" height="100%">
                <svg style="background-image: url(&quot;http://mmbiz.qpic.cn/sz_mmbiz_gif/uY3mumOluC1FGl9Ukp7vdgzXibm6XQ2A0cmkDwP4syIWNjDYwL2yibzicYVoSJjAYvAhoax8XO2yUy4DiaxdpNMewg/0?wx_fmt=gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0vw;line-height: 0;"  viewbox="0 0  640 1190">
                </svg>
              </foreignObject>
            </g>
            <animateTransform attributeName="transform" type="translate" values="-2000 0" fill="freeze" begin="click" dur="1000s"></animateTransform>
            <rect style="pointer-events:visible;" width="100%" height="100%" fill="#000000" opacity="0">
              <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
            </rect>
          </g>

        </svg>
      </section>
    

    </section>
  </section>
</div>
<form id ="J_Form" method="post" enctype="multipart/form-data" class="form-horizontal" action="#" onsubmit="return doCampaignEdit();">
  <input type="file" accept="image/png, image/gif, image/jpeg, image/jpg" name="file[]" id="file" multiple="multiple" />
  <input type="submit" name="submit" value="上传" />
</form>
<!-- <script src="js/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<!-- <script src="js/伸长计算.js"></script> -->
<script>
  var projectID = "0927"
  var endTxt = null
  function doCampaignEdit() {
    var formData = new FormData($('#J_Form')[0]);
    console.log(formData)
    $.ajax({
      url: 'https://svgtools.im20.com.cn/User/doUploadWx',
      type: 'POST',
      dataType: 'json',
      data: formData,
      contentType: false,
      processData: false,
      success: function (data) {
        if(data.code==0){
          console.log(data)
          $('#code').each(function() {
            var oldText = $(this).html();
            if(endTxt){
              endTxt = endTxt;
            }else {
              endTxt = oldText;
            }
            for(let i=0;i<data.data.length;i++){
              endTxt = endTxt.replace("images/"+projectID+"/"+data.data[i].name,data.data[i].upl_url);
            }
            console.log(endTxt)
          });
        }else {
          console.log(data.message);
        }
      }
    });
    return false;
  }

</script>