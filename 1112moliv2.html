<?xml version="1.0" encoding="utf-8"?>
<div id="code">
  <section id="整体" style="line-height: 0; pointer-events: none; overflow: hidden;visibility: visible;overflow:hidden;">
    <section id="伸长1" style="overflow:hidden">
      <section id="内容层1" style="height: 0;">
        <svg id="1-1" style="background-image: url(&quot;images/1112moli/1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1260">
        </svg>

        <section id="2" style="scroll-snap-type: x mandatory; margin-top: -0.33vw; display: flex; overflow-x: auto; overflow-y: hidden; pointer-events: painted">
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="2-1" style="background-image: url(&quot;images/1112moli/2-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="2-1" style="background-image: url(&quot;images/1112moli/2-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
        </section>

        <section id="3" style="scroll-snap-type: x mandatory; margin-top: -0.33vw; display: flex; overflow-x: auto; overflow-y: hidden; pointer-events: painted">
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="3-1" style="background-image: url(&quot;images/1112moli/3-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="3-2" style="background-image: url(&quot;images/1112moli/3-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
        </section>

        <section id="4" style="scroll-snap-type: x mandatory; margin-top: -0.33vw; display: flex; overflow-x: auto; overflow-y: hidden; pointer-events: painted">
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="4-1" style="background-image: url(&quot;images/1112moli/4-1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
          <section style="min-width: 100%; scroll-snap-align: center; flex: none; flex-direction: column">
            <svg id="4-2" style="background-image: url(&quot;images/1112moli/4-2.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1323">
            </svg>          
          </section>
        </section>

      
        <svg id="5" style="background-image: url(&quot;images/1112moli/5.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0.33vw;line-height: 0;"  viewbox="0 0 750 1077">
        </svg>
      </section>
      <section style="pointer-events:none;font-size:0;">
        <svg id="宽度控制1" style="max-width:none!important;
            background-image:url(&quot;images/1112moli/0.gif&quot;);
            background-repeat:no-repeat;background-size:100% auto;" viewBox="0 0 750 1260">
          <animate id="宽度动画1" attributeName="width" fill="freeze" calcMode="spline" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" restart="never" keyTimes="0;0.002;1"
                   values="100%;500%;500%" dur="1000s" begin="click+0.5s"></animate>
          <animate attributeName="opacity" begin="click+0s" restart="never" dur="500s" keyTimes="0;0.00000001;1" values="1;0;0" fill="freeze"></animate>
         

          <g>
            <g id="1-2" transform="translate(1000 0)">
              <foreignObject x="0" y="0" width="100%" height="100%">
                <svg style="background-image: url(&quot;images/1112moli/1.gif&quot;);background-size: 100%;background-repeat: no-repeat;margin-top:-0vw;line-height: 0;"  viewbox="0 0 750 1260">
                </svg>
              </foreignObject>
            </g>
            <animateTransform attributeName="transform" type="translate" values="-1000 0" fill="freeze" begin="click" dur="1000s"></animateTransform>
            <rect style="pointer-events:visible;" width="100%" height="100%" fill="#000000" opacity="0">
              <set attributeName="visibility" from="visible" to="hidden" begin="click"></set>
            </rect>
          </g>

        </svg>
      </section>
    </section>
  </section>
</div>
<form id ="J_Form" method="post" enctype="multipart/form-data" class="form-horizontal" action="#" onsubmit="return doCampaignEdit();">
  <input type="file" accept="image/png, image/gif, image/jpeg, image/jpg" name="file[]" id="file" multiple="multiple" />
  <input type="submit" name="submit" value="上传" />
</form>
<!-- <script src="js/jquery.js"></script> -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<!-- <script src="js/伸长计算.js"></script> -->
<script>
  var projectID = "1112moli"
  var endTxt = null
  function doCampaignEdit() {
    var formData = new FormData($('#J_Form')[0]);
    console.log(formData)
    $.ajax({
      url: 'https://svgtools.im20.com.cn/User/doUploadWx',
      type: 'POST',
      dataType: 'json',
      data: formData,
      contentType: false,
      processData: false,
      success: function (data) {
        if(data.code==0){
          console.log(data)
          $('#code').each(function() {
            var oldText = $(this).html();
            if(endTxt){
              endTxt = endTxt;
            }else {
              endTxt = oldText;
            }
            for(let i=0;i<data.data.length;i++){
              endTxt = endTxt.replace("images/"+projectID+"/"+data.data[i].name,data.data[i].upl_url);
            }
            console.log(endTxt)
          });
        }else {
          console.log(data.message);
        }
      }
    });
    return false;
  }

</script>